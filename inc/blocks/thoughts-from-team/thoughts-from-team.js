(()=>{"use strict";const e=window.React,t=window.wp.i18n,a=window.wp.element,n=window.wp.blockEditor,r=window.wp.components,l=window.wp.apiFetch,o=JSON.parse('{"UU":"bbb/thoughts-from-team"}');(0,window.wp.blocks.registerBlockType)(o.UU,{edit:function({attributes:o,setAttributes:s}){const{entries:i=[]}=o,[m,u]=(0,a.useState)([]);(0,a.useEffect)(()=>{i&&0!==i.length||s({entries:[{userId:0,content:""}]})},[]),(0,a.useEffect)(()=>{l({path:"/bbb/v1/team-members"}).then(e=>u(e)).catch(()=>u([]))},[]);const c=m.map(e=>({label:e.name,value:e.id,avatar:e.avatar_urls&&e.avatar_urls[48]})),h=(e,t,a)=>{const n=i.map((n,r)=>r===e?{...n,[t]:a}:n);s({entries:n})},b=(0,n.useBlockProps)({className:"team-thoughts-editor"}),_=(0,t.__)("Contributor","bigbluebox"),d=(0,t.__)("Select a user","bigbluebox"),g=(0,t.__)("Text from contributor","bigbluebox"),v=(0,t.__)("Add their thoughts hereâ€¦","bigbluebox");return(0,e.createElement)("div",{...b},(0,e.createElement)("h3",{className:"team-thoughts-editor__title"},(0,t.__)("Thoughts from the Team","bigbluebox")),(0,e.createElement)("div",{className:"team-thoughts-editor__entries"},i.map((a,n)=>{const l=m.find(e=>e.id===a.userId),o=l?.avatar_urls?.[96]||l?.avatar_urls?.[48]||"";return(0,e.createElement)("div",{key:n,className:"team-thought-entry"},l&&(0,e.createElement)("div",{className:"team-thought-entry__user"},(0,e.createElement)("img",{className:"team-thought-entry__avatar",src:o,alt:l.name,width:"56",height:"56"}),(0,e.createElement)("h4",null,(u=l.name)?u.split(" ")[0]:"")),(0,e.createElement)("div",{className:"team-thought-entry__contributor"},(0,e.createElement)("span",{className:"team-thought-entry__label","aria-hidden":"true"},_),(0,e.createElement)(r.SelectControl,{className:"team-thought-entry__input",label:_,hideLabelFromVision:!0,value:a.userId,options:[{label:d,value:0},...c.map(({label:e,value:t})=>({label:e,value:t}))],onChange:e=>h(n,"userId",parseInt(e,10))})),(0,e.createElement)("div",{className:"team-thought-entry__content"},(0,e.createElement)("span",{className:"team-thought-entry__label","aria-hidden":"true"},g),(0,e.createElement)(r.TextareaControl,{className:"team-thought-entry__input",label:g,hideLabelFromVision:!0,value:a.content,onChange:e=>h(n,"content",e),placeholder:v})),i.length>1&&(0,e.createElement)("div",{className:"team-thought-entry__actions"},(0,e.createElement)(r.Button,{className:"team-thought-entry__remove",variant:"secondary",isDestructive:!0,onClick:()=>(e=>{const t=[...i];t.splice(e,1),s({entries:t})})(n)},(0,t.__)("Remove author","bigbluebox"))));var u})),(0,e.createElement)(r.Button,{className:"team-thoughts-editor__add",variant:"primary",onClick:()=>{s({entries:[...i,{userId:0,content:""}]})}},i&&i.length>0?(0,t.__)("Add another author","bigbluebox"):(0,t.__)("Add author","bigbluebox")))},save:()=>null})})();