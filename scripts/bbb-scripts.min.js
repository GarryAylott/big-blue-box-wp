const CONFIG={FADE_DISTANCE:900,SCROLL_ANIMATION_DELAY:100,SELECTORS:{nav:".nav",navToggle:".menu-nav-toggle",bgImage:".bg-image-fade img",searchIcon:".nav-search-icon",searchOverlay:"#searchOverlay",podcastMenu:".pod-links-menu details",scrollContainer:".posts-hori-scroll",suggestedPosts:".suggested-posts"}},elements={primaryNav:document.querySelector(CONFIG.SELECTORS.nav),navToggle:document.querySelector(CONFIG.SELECTORS.navToggle)},initNavigation=()=>{elements.navToggle?.addEventListener("click",(()=>{const e="true"===elements.primaryNav?.dataset.visible;elements.primaryNav?.setAttribute("data-visible",String(!e)),elements.navToggle?.setAttribute("aria-expanded",String(!e))}))},initBackgroundFade=()=>{const e=document.querySelector(CONFIG.SELECTORS.bgImage);if(!e)return;let t=!1;new IntersectionObserver((n=>{n.forEach((n=>{if(n.isIntersecting){const n=()=>{t||(requestAnimationFrame((()=>{const n=Math.max(1-window.scrollY/CONFIG.FADE_DISTANCE,0);e.style.opacity=n,t=!1})),t=!0)};n(),window.addEventListener("scroll",n,{passive:!0})}}))})).observe(e)},initSearch=()=>{const e=document.querySelector(CONFIG.SELECTORS.searchIcon),t=document.querySelector(CONFIG.SELECTORS.searchOverlay);if(!e||!t)return;const n=()=>{t.setAttribute("aria-hidden","true"),document.body.classList.remove("overlay-active")};e.addEventListener("click",(e=>{e.preventDefault(),t.setAttribute("aria-hidden","false"),document.body.classList.add("overlay-active")})),t.addEventListener("click",(({target:e})=>{e===t&&n()})),document.addEventListener("keydown",(({key:e})=>{"Escape"===e&&"false"===t.getAttribute("aria-hidden")&&n()}))},initPodcastMenu=()=>{const e=document.querySelector(CONFIG.SELECTORS.podcastMenu);if(!e)return;document.addEventListener("click",(({target:t})=>{e.open&&!e.contains(t)&&(e.open=!1)}),{passive:!0})},initScrollContainers=()=>{const e=document.querySelectorAll(CONFIG.SELECTORS.scrollContainer);if(!e.length)return;const t=new Map;e.forEach((e=>{const n=e.closest(CONFIG.SELECTORS.suggestedPosts)?.querySelector(".suggested-posts-header");if(!n)return;const r=n.querySelector(".scroll-left"),o=n.querySelector(".scroll-right"),s=e.querySelector("article")?.offsetWidth??16,i=()=>{const t=e.scrollWidth-e.clientWidth;r.disabled=e.scrollLeft<=0,o.disabled=e.scrollLeft>=t-1};t.set(e,i);const a=t=>{e.scrollBy({left:t*s,behavior:"smooth"}),setTimeout(i,CONFIG.SCROLL_ANIMATION_DELAY)};r?.addEventListener("click",(()=>a(-1))),o?.addEventListener("click",(()=>a(1))),e.addEventListener("scroll",i,{passive:!0}),i()}));const n=new ResizeObserver((e=>{e.forEach((e=>{const n=e.target,r=t.get(n);r&&r()}))}));e.forEach((e=>{n.observe(e)}))},initExternalLinkIcons=()=>{const e=document.querySelectorAll('a[target="_blank"]:not(.has-external-icon)');window.themeUrl;e.forEach((e=>{const t=document.createElement("span");t.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" class="external-link-icon">\n            <path d="M13 3L3 13M13 3H4M13 3V12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>',e.appendChild(t),e.classList.add("has-external-icon")}))},init=()=>{initNavigation(),initBackgroundFade(),initSearch(),initPodcastMenu(),initScrollContainers(),initExternalLinkIcons()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();
//# sourceMappingURL=bbb-scripts.min.js.map
