@use "utilities" as *;

/*
PODCAST TRANSCRIPT ACCORDION
CSS-only accordion using native <details>/<summary>
*/

.podcast-transcript {
    margin-block: var(--space-l);

    &__accordion {
        position: relative;
        border: 1px solid var(--clr-border-darker);
        border-radius: var(--radius-normal);
        overflow: hidden;
    }

    &__summary {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-block: var(--space-xs);
        padding-inline: var(--space-m);
        cursor: pointer;
        list-style: none;
        transition: background var(--button-timing-duration)
            var(--button-timing-curve);

        &::-webkit-details-marker {
            display: none;
        }

        &:hover,
        &:focus-visible {
            background: var(--clr-surface-300);
        }

        &:focus-visible {
            outline: 2px solid var(--clr-brand-primary);
            outline-offset: -2px;
        }
    }

    &__title {
        display: flex;
        align-items: center;
        gap: var(--space-2xs);
        font-family: var(--font-family-headings);
        font-size: var(--step-1);
        font-weight: var(--fw-bold);
    }

    &__icon {
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s var(--button-timing-curve);

        @media (width < 400px) {
            @include visually-hidden;
        }
    }

    &__accordion[open] &__icon {
        transform: rotate(180deg);
    }

    &__content {
        max-height: 60vh;
        padding-block: var(--space-s);
        padding-inline: var(--space-m);
        overflow-y: auto;
        scroll-behavior: smooth;
        will-change: opacity, transform;

        &::-webkit-scrollbar {
            width: 8px;
        }

        &::-webkit-scrollbar-track {
            background: var(--clr-surface-400);
            border-radius: 4px;
        }

        &::-webkit-scrollbar-thumb {
            background: var(--clr-surface-200);
            border-radius: 4px;

            &:hover {
                background: var(--clr-surface-100);
            }
        }

        p {
            font-size: var(--step-0);
            color: var(--clr-text-400);
        }
    }
}

@media (prefers-reduced-motion: no-preference) {
    .podcast-transcript__accordion[open] .podcast-transcript__content {
        animation: transcript-reveal 0.5s ease;
    }
}

@keyframes transcript-reveal {
    from {
        opacity: 0;
        transform: translateY(-0.5rem);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
