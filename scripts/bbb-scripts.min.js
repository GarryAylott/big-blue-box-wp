const CONFIG={FADE_DISTANCE:900,SCROLL_ANIMATION_DELAY:100,SELECTORS:{nav:".nav",navToggle:".menu-nav-toggle",bgImage:".bg-image-fade img",searchIcon:".nav-search-icon",searchOverlay:"#searchOverlay",podcastMenu:".pod-links-menu details",scrollContainer:".posts-hori-scroll",suggestedPosts:".suggested-posts"}},elements={primaryNav:document.querySelector(CONFIG.SELECTORS.nav),navToggle:document.querySelector(CONFIG.SELECTORS.navToggle)},initNavigation=()=>{elements.navToggle?.addEventListener("click",(()=>{const e="true"===elements.primaryNav?.dataset.visible;elements.primaryNav?.setAttribute("data-visible",String(!e)),elements.navToggle?.setAttribute("aria-expanded",String(!e))}))},initBackgroundFade=()=>{const e=document.querySelector(CONFIG.SELECTORS.bgImage);if(!e)return;let t=!1;new IntersectionObserver((n=>{n.forEach((n=>{if(n.isIntersecting){const n=()=>{t||(requestAnimationFrame((()=>{const n=Math.max(1-window.scrollY/CONFIG.FADE_DISTANCE,0);e.style.opacity=n,t=!1})),t=!0)};n(),window.addEventListener("scroll",n,{passive:!0})}}))})).observe(e)},initSearch=()=>{const e=document.querySelector(CONFIG.SELECTORS.searchIcon),t=document.querySelector(CONFIG.SELECTORS.searchOverlay);if(!e||!t)return;const n=()=>{t.setAttribute("aria-hidden","true"),document.body.classList.remove("overlay-active")};e.addEventListener("click",(e=>{e.preventDefault(),t.setAttribute("aria-hidden","false"),document.body.classList.add("overlay-active")})),t.addEventListener("click",(({target:e})=>{e===t&&n()})),document.addEventListener("keydown",(({key:e})=>{"Escape"===e&&"false"===t.getAttribute("aria-hidden")&&n()}))},initPodcastMenu=()=>{const e=document.querySelector(CONFIG.SELECTORS.podcastMenu);if(!e)return;document.addEventListener("click",(({target:t})=>{e.open&&!e.contains(t)&&(e.open=!1)}),{passive:!0})},initScrollContainers=()=>{const e=document.querySelectorAll(CONFIG.SELECTORS.scrollContainer);if(!e.length)return;const t=new Map;e.forEach((e=>{const n=e.closest(CONFIG.SELECTORS.suggestedPosts)?.querySelector(".suggested-posts-header");if(!n)return;const s=n.querySelector(".scroll-left"),r=n.querySelector(".scroll-right"),o=e.querySelector("article")?.offsetWidth??16,i=()=>{const t=e.scrollWidth-e.clientWidth;s.disabled=e.scrollLeft<=0,r.disabled=e.scrollLeft>=t-1};t.set(e,i);const a=t=>{e.scrollBy({left:t*o,behavior:"smooth"}),setTimeout(i,CONFIG.SCROLL_ANIMATION_DELAY)};s?.addEventListener("click",(()=>a(-1))),r?.addEventListener("click",(()=>a(1))),e.addEventListener("scroll",i,{passive:!0}),i()}));const n=new ResizeObserver((e=>{e.forEach((e=>{const n=e.target,s=t.get(n);s&&s()}))}));e.forEach((e=>{n.observe(e)}))},initExternalLinkIcons=()=>{const e=document.querySelectorAll('a[target="_blank"]:not(.has-external-icon)');window.themeUrl;e.forEach((e=>{const t=document.createElement("span");t.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" class="external-link-icon">\n            <path d="M13 3L3 13M13 3H4M13 3V12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>',e.appendChild(t),e.classList.add("has-external-icon")}))},initTardisScrollProgress=()=>{const e=document.querySelector(".tardis-progress-container"),t=document.getElementById("tardis-fill"),n=document.getElementById("tardisProgressStatus"),s=document.querySelector(".post-featured-image"),r=document.querySelector(".single-post-article");document.querySelector("#comments");if(!(e&&t&&n&&r))return;const o=s?.offsetHeight||300;let i=!1;const a=()=>{const s=window.scrollY||window.pageYOffset,a=r.offsetTop+r.offsetHeight,c=window.innerHeight,l=a-c,d=Math.min(s/(l+100),1),u=Math.round(100*d);s>o&&s<l+c+200?e.classList.add("visible"):e.classList.remove("visible");const g=864*(1-d);t.setAttribute("y",g),n.textContent=`Reading progress: ${u}%`,d>=1&&!e.classList.contains("tardis-bounce")&&(e.classList.add("tardis-bounce"),setTimeout((()=>e.classList.remove("tardis-bounce")),600)),i=!1},c=()=>{i||(requestAnimationFrame(a),i=!0)};window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",c,{passive:!0}),a()},init=()=>{initNavigation(),initBackgroundFade(),initSearch(),initPodcastMenu(),initScrollContainers(),initExternalLinkIcons(),initTardisScrollProgress()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();
//# sourceMappingURL=bbb-scripts.min.js.map
