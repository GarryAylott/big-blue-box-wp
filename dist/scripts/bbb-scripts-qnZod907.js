/*!
 * @license MIT
 * @name vlitejs
 * @version 7.4.0
 * @copyright 2025 Yoriiis
 */const m={},B={};function O({plugins:s,provider:e,type:t,player:i}){(function(n){const r=[],a=Object.keys(m);return n.forEach((o=>{if(!a.includes(o))throw new Error(`vlitejs :: Unknown plugin "${o}".`);r.push({id:o,Plugin:m[o],options:B[o]})})),r})(s).forEach((({id:n,Plugin:r,options:a})=>{const o=new r({player:i,options:a});if(i.plugins[n]=o,!o.providers.includes(e)||!o.types.includes(t))throw new Error(`vlitejs :: The "${n}" plugin is only compatible with providers:"${o.providers}" and types:"${o.types}"`);o.init()}))}const y={html5:function(s){return class extends s{constructor(e){super(e),this.events=[{type:"timeupdate",listener:super.onTimeUpdate},{type:"ended",listener:super.onMediaEnded},{type:"playing",listener:this.onPlaying},{type:"waiting",listener:this.onWaiting},{type:"seeking",listener:this.onSeeking},{type:"seeked",listener:this.onSeeked}]}init(){this.waitUntilVideoIsReady().then((()=>{this.addSpecificEvents(),super.onReady()}))}waitUntilVideoIsReady(){return new window.Promise((e=>{this.media.readyState>=2&&this.media.duration||this.media.readyState===0&&this.media.preload==="none"?e():(this.media.addEventListener("loadedmetadata",e,{once:!0}),this.media.addEventListener("canplay",e,{once:!0}))}))}addSpecificEvents(){this.events.forEach((e=>{this.media.addEventListener(e.type,e.listener.bind(this))}))}getInstance(){return this.media}getCurrentTime(){return new window.Promise((e=>e(this.media.currentTime)))}getDuration(){return new window.Promise((e=>e(this.media.duration)))}methodPlay(){this.media.play()}methodPause(){this.media.pause()}methodSetVolume(e){this.media.volume=e}methodGetVolume(){return new window.Promise((e=>e(this.media.volume)))}methodMute(){this.media.muted=!0,this.media.setAttribute("muted","")}methodUnMute(){this.media.muted=!1,this.media.removeAttribute("muted")}methodSeekTo(e){this.media.currentTime=e}onWaiting(){this.loading(!0)}onPlaying(){this.loading(!1)}onSeeking(){this.loading(!0)}onSeeked(){this.loading(!1)}removeSpecificEvents(){this.events.forEach((e=>{this.media.removeEventListener(e.type,e.listener)}))}destroy(){this.removeSpecificEvents(),super.destroy()}}}},T={};function C(s){const e=1e3*s,t=e/1e3/60|0,i=e/1e3%60|0;let n="";return n+=t<10?"0":"",n+=`${t}:`,n+=i<10?"0":"",n+=i,n}function x(){const s=(function(){return document.exitFullscreen instanceof Function?"":["webkit","moz","ms"].find((e=>document[`${e}ExitFullscreen`]instanceof Function||document[`${e}CancelFullScreen`]instanceof Function))||""})();return{requestFn:s?`${s}RequestFullScreen`:"requestFullscreen",cancelFn:s?`${s}ExitFullscreen`:"exitFullscreen",changeEvent:s?`${s}fullscreenchange`:"fullscreenchange",isFullScreen:s?`${s}FullscreenElement`:"fullscreenElement"}}function A(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function h({target:s,selectorString:e,nodeName:t}){return(t=[].concat(t)).some((i=>s.nodeName.toLowerCase()===i&&s.matches(e)))}var H='<svg class="v-iconPressed" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M1 11h2v2c0 .55.45 1 1 1s1-.45 1-1v-3c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1Zm2-8H1c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1S3 .45 3 1v2Zm7 11c.55 0 1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1h-3c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1Zm1-11V1c0-.55-.45-1-1-1S9 .45 9 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1h-2Z"/></svg>',$='<svg class="v-iconUnpressed" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M1 9c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1H2v-2c0-.55-.45-1-1-1Zm0-4c.55 0 1-.45 1-1V2h2c.55 0 1-.45 1-1s-.45-1-1-1H1C.45 0 0 .45 0 1v3c0 .55.45 1 1 1Zm11 7h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1s-1 .45-1 1v2ZM9 1c0 .55.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V1c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1Z"/></svg>',q='<svg class="v-iconPressed" viewBox="0 0 12 14" xmlns="http://www.w3.org/2000/svg"><path d="M2 14c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2S0 .9 0 2v10c0 1.1.9 2 2 2ZM8 2v10c0 1.1.9 2 2 2s2-.9 2-2V2c0-1.1-.9-2-2-2S8 .9 8 2Z"/></svg>',V='<svg class="v-iconUnpressed" viewBox="0 0 11 13" xmlns="http://www.w3.org/2000/svg"><path d="M0 1v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L1.54.16A.998.998 0 0 0 0 1Z"/></svg>',I='<svg class="v-iconUnpressed" viewBox="0 0 18 17" xmlns="http://www.w3.org/2000/svg"><path d="M0 6.461v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V2.871c0-.89-1.08-1.34-1.71-.71L4 5.461H1c-.55 0-1 .45-1 1Zm13.5 2a4.5 4.5 0 0 0-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02ZM11 .911v.2c0 .38.25.71.6.85a7.004 7.004 0 0 1 4.4 6.5c0 2.94-1.82 5.47-4.4 6.5-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85a8.98 8.98 0 0 0 5.79-8.4c0-3.84-2.4-7.11-5.79-8.4-.58-.23-1.21.22-1.21.85Z"/></svg>',R='<svg class="v-iconPressed" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M.63.292a.996.996 0 0 0 0 1.41l3.66 3.66-.29.3H1c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.997.997 0 1 0 1.41-1.41L2.05.293c-.39-.39-1.02-.39-1.42 0ZM16 8.662c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85 2.57 1.04 4.39 3.56 4.39 6.5Zm-8.71-6.29-.17.17L9 4.422v-1.35c0-.89-1.08-1.33-1.71-.7Zm6.21 6.29a4.5 4.5 0 0 0-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24Z"/></svg>';function j({options:s,isMuted:e,isVideo:t}){return t?`<div class="v-controlBar">${s.playPause?w():""}${s.time?b():""}${s.progressBar?S():""}${s.volume?P({isMuted:e}):""}${s.fullscreen?`<button class="v-fullscreenButton v-controlButton" aria-label="Enter fullscreen">${$}${H}</span></button>`:""}</div>`:`<div class="v-controlBar">${s.playPause?w():""}${s.time?b():""}${s.progressBar?S():""}${s.volume?P({isMuted:e}):""}</div>`}function w(){return`<button class="v-playPauseButton v-controlButton" aria-label="Play">${V}${q}</button>`}function b(){return'<div class="v-time"><span class="v-currentTime">00:00</span>&nbsp;/&nbsp;<span class="v-duration"></span></div>'}function S(){return'<input type="range" class="v-progressBar v-progressBarStyle" min="0" max="100" step="0.01" value="0" aria-label="Seek" aria-valuemin="0" />'}function P({isMuted:s}){return`<button class="v-volumeButton v-controlButton${s?" v-controlPressed":""}">${I}${R}</button>`}class D{constructor({player:e,type:t}){this.player=e,this.type=t,this.touchEvents=["touchstart","touchmove","touchend"],this.onInputProgressBar=this.onInputProgressBar.bind(this),this.onTouchEventProgressBar=this.onTouchEventProgressBar.bind(this),this.onClickOnControlBar=this.onClickOnControlBar.bind(this),this.togglePlayPause=this.togglePlayPause.bind(this),this.toggleVolume=this.toggleVolume.bind(this),this.toggleFullscreen=this.toggleFullscreen.bind(this)}init(){this.render(),this.cacheElements(),this.addEvents()}cacheElements(){const e=this.player.elements.container.querySelector(".v-controlBar");e&&(this.player.elements.controlBar=e,this.player.elements.playPause=e.querySelector(".v-playPauseButton"),this.player.elements.progressBar=e.querySelector(".v-progressBar"),this.player.elements.currentTime=e.querySelector(".v-currentTime"),this.player.elements.duration=e.querySelector(".v-duration"),this.player.elements.volume=e.querySelector(".v-volumeButton"),this.player.elements.fullscreen=e.querySelector(".v-fullscreenButton"),this.player.elements.volume&&this.player.elements.volume.setAttribute("aria-label",this.player.isMuted?"Unmute":"Mute"))}render(){this.player.elements.container.insertAdjacentHTML("beforeend",this.getTemplate())}onReady(){this.player.getDuration().then((e=>{this.player.elements.progressBar&&this.player.elements.progressBar.setAttribute("aria-valuemax",`${Math.round(e)}`),this.player.elements.duration&&(this.player.elements.duration.innerHTML=C(e))}))}addEvents(){var e;this.player.elements.progressBar&&(this.player.elements.progressBar.addEventListener("input",this.onInputProgressBar),this.player.isTouch&&this.touchEvents.forEach((t=>{this.player.elements.progressBar.addEventListener(t,this.onTouchEventProgressBar)}))),(e=this.player.elements.controlBar)===null||e===void 0||e.addEventListener("click",this.onClickOnControlBar)}onTouchEventProgressBar(e){e.preventDefault();const t=e.target,i=Number.parseFloat(t.getAttribute("max")||"100"),n=t.getBoundingClientRect(),r=(e.changedTouches[0].clientX-n.left)/n.width*100;t.value=""+100*r/i,t.dispatchEvent(new Event("input"))}onInputProgressBar(e){const t=e.target;t.style.setProperty("--vlite-progressValue",`${t.value}%`),this.player.elements.outerContainer.classList.contains("v-firstStart")&&this.player.play(),this.player.getDuration().then((i=>{this.player.seekTo(Number.parseFloat(t.value)*i/100)}))}onClickOnControlBar(e){const t=e.target,i=h({target:t,selectorString:".v-playPauseButton",nodeName:["button"]}),n=h({target:t,selectorString:".v-volumeButton",nodeName:["button"]}),r=h({target:t,selectorString:".v-fullscreenButton",nodeName:["button"]});i?this.togglePlayPause(e):n?this.toggleVolume(e):r&&this.toggleFullscreen(e),(i||n||r)&&this.player.elements.container.focus(),this.player.Vlitejs.startAutoHideTimer()}togglePlayPause(e){e.preventDefault(),this.player.elements.outerContainer.classList.contains("v-paused")?this.player.play():this.player.pause()}toggleVolume(e){e.preventDefault(),this.player.elements.volume.classList.contains("v-controlPressed")?this.player.unMute():this.player.mute()}toggleFullscreen(e){if(e.preventDefault(),this.player.isFullScreen)this.isOrientationApiAvailable()&&window.screen.orientation.unlock(),this.player.exitFullscreen();else{this.player.requestFullscreen();try{window.matchMedia("(orientation:portrait)").matches&&this.isOrientationApiAvailable()&&window.screen.orientation.lock("landscape").catch((()=>{}))}catch{}}}isOrientationApiAvailable(){return window.screen.orientation&&!window.screen.mozOrientation}getTemplate(){return`${j({options:this.player.options,isMuted:this.player.isMuted,isVideo:this.type==="video"})}`}removeEvents(){var e;this.player.elements.progressBar&&(this.player.elements.progressBar.removeEventListener("input",this.onInputProgressBar),this.player.isTouch&&this.touchEvents.forEach((t=>{this.player.elements.progressBar.removeEventListener(t,this.onTouchEventProgressBar)}))),(e=this.player.elements.controlBar)===null||e===void 0||e.removeEventListener("click",this.onClickOnControlBar)}destroy(){var e;this.removeEvents(),(e=this.player.elements.controlBar)===null||e===void 0||e.remove()}}class N{constructor({Vlitejs:e,type:t}){this.Vlitejs=e,this.type=t,this.plugins={},this.media=e.media,this.options=e.options,this.isCast=!1,this.isLinearAd=!1,this.elements={container:e.container,outerContainer:e.outerContainer,bigPlay:e.container.querySelector(".v-bigPlay"),poster:e.container.querySelector(".v-poster"),controlBar:null,playPause:null,progressBar:null,currentTime:null,duration:null,volume:null,fullscreen:null},this.isFullScreen=!1,this.isMuted=this.options.muted,this.isPaused=null,this.playerEvents=[],this.isTouch=A(),this.controlBar=new D({player:this,type:t})}build(){this.options.controls&&this.controlBar.init(),this.init()}onReady(){this.options.muted&&this.mute(),this.media.classList.add("v-media"),this.media.setAttribute("tabindex","-1"),this.options.autoplay&&(!this.media.muted&&this.mute(),this.play()),this.Vlitejs.onReady instanceof Function&&this.Vlitejs.onReady.call(this,this),this.media.preload==="none"&&this.Vlitejs.provider==="html5"?this.media.addEventListener("loadedmetadata",(()=>this.triggerOnReady())):this.triggerOnReady(),this.loading(!1)}triggerOnReady(){this.options.controls&&this.controlBar.onReady(),Object.keys(this.plugins).forEach((e=>{this.plugins[e].onReady instanceof Function&&this.plugins[e].onReady()}))}on(e,t){t instanceof Function&&(this.playerEvents.push({type:e,listener:t}),this.elements.container.addEventListener(e,t))}off(e,t){t instanceof Function&&this.elements.container.removeEventListener(e,t)}dispatchEvent(e,t){this.elements.container.dispatchEvent(new window.CustomEvent(e,{detail:t}))}loading(e){this.elements.outerContainer.classList[e?"add":"remove"]("v-loading"),this.dispatchEvent("progress")}onTimeUpdate(){this.options.time&&Promise.all([this.getCurrentTime(),this.getDuration()]).then((([e,t])=>this.updateProgressBar({seconds:e,duration:t})))}updateProgressBar({seconds:e,duration:t,isRemote:i=!1}){const n=Math.round(e);if(this.elements.progressBar){const r=100*n/t;this.elements.progressBar.value=`${r}`,this.elements.progressBar.style.setProperty("--vlite-progressValue",`${r}%`),this.elements.progressBar.setAttribute("aria-valuenow",`${Math.round(e)}`)}this.elements.currentTime&&(this.elements.currentTime.innerHTML=C(n)),!i&&this.dispatchEvent("timeupdate")}onMediaEnded(){this.options.loop?this.play():(this.elements.outerContainer.classList.replace("v-playing","v-paused"),this.elements.outerContainer.classList.add("v-firstStart"),this.isPaused=null),this.elements.poster&&this.elements.poster.classList.add("v-active"),this.elements.progressBar&&(this.elements.progressBar.value="0",this.elements.progressBar.style.setProperty("--vlite-progressValue","0%"),this.elements.progressBar.removeAttribute("aria-valuenow")),this.elements.currentTime&&(this.elements.currentTime.innerHTML="00:00"),this.dispatchEvent("ended")}play(){this.isLinearAd||(this.isPaused===null&&(this.elements.outerContainer.classList.remove("v-firstStart"),this.type==="video"&&this.elements.poster&&this.elements.poster.classList.remove("v-active")),!this.isCast&&this.methodPlay(),this.isPaused=!1,this.elements.outerContainer.classList.replace("v-paused","v-playing"),this.elements.playPause&&(this.elements.playPause.setAttribute("aria-label","Pause"),this.elements.playPause.classList.add("v-controlPressed")),this.type==="video"&&this.elements.bigPlay&&this.elements.bigPlay.setAttribute("aria-label","Pause"),this.afterPlayPause(),this.dispatchEvent("play"))}pause(){!this.isCast&&this.methodPause(),this.isPaused=!0,this.elements.outerContainer.classList.replace("v-playing","v-paused"),this.elements.playPause&&(this.elements.playPause.setAttribute("aria-label","Play"),this.elements.playPause.classList.remove("v-controlPressed")),this.type==="video"&&this.elements.bigPlay&&this.elements.bigPlay.setAttribute("aria-label","Play"),this.afterPlayPause(),this.dispatchEvent("pause")}afterPlayPause(){this.Vlitejs.autoHideGranted&&(this.Vlitejs.stopAutoHideTimer(),!this.isPaused&&this.Vlitejs.startAutoHideTimer())}setVolume(e){let t=e;t>1?t=1:t<=0?(t=0,this.isMuted=!0,this.elements.volume&&this.elements.volume.classList.add("v-controlPressed")):(this.isMuted=!1,this.elements.volume&&this.elements.volume.classList.remove("v-controlPressed")),this.methodSetVolume(t),this.dispatchEvent("volumechange",{volume:t})}getVolume(){return new window.Promise((e=>{this.methodGetVolume().then((t=>{e(t)}))}))}mute(){this.methodMute(),this.isMuted=!0,this.elements.volume&&(this.elements.volume.classList.add("v-controlPressed"),this.elements.volume.setAttribute("aria-label","Unmute")),this.dispatchEvent("volumechange")}unMute(){this.methodUnMute(),this.isMuted=!1,this.elements.volume&&(this.elements.volume.classList.remove("v-controlPressed"),this.elements.volume.setAttribute("aria-label","Mute")),this.dispatchEvent("volumechange")}seekTo(e){this.methodSeekTo(e)}requestFullscreen(){const{requestFn:e}=this.Vlitejs.supportFullScreen;this.media[e]&&(this.elements.container[e](),this.isFullScreen=!0,this.elements.outerContainer.classList.add("v-fullscreen"),this.elements.fullscreen&&(this.elements.fullscreen.classList.add("v-controlPressed"),this.elements.fullscreen.setAttribute("aria-label","Exit fullscreen")),this.dispatchEvent("enterfullscreen"))}exitFullscreen({escKey:e=!1}={}){const{cancelFn:t}=this.Vlitejs.supportFullScreen;document[t]&&(!e&&document[t](),this.isFullScreen=!1,this.elements.outerContainer.classList.remove("v-fullscreen"),this.elements.fullscreen&&(this.elements.fullscreen.classList.remove("v-controlPressed"),this.elements.fullscreen.setAttribute("aria-label","Enter fullscreen")),this.dispatchEvent("exitfullscreen"))}destroy(){var e;(e=this.controlBar)===null||e===void 0||e.destroy(),Object.keys(this.plugins).forEach((t=>{this.plugins[t].destroy instanceof Function&&this.plugins[t].destroy()})),this.playerEvents.forEach((t=>{this.elements.container.removeEventListener(t.type,t.listener)})),this.elements.container.remove()}}const Z={audio:{controls:!0,autoplay:!1,playPause:!0,progressBar:!0,time:!0,volume:!0,loop:!1},video:{controls:!0,autoplay:!1,playPause:!0,progressBar:!0,time:!0,volume:!0,fullscreen:!0,poster:null,bigPlay:!0,playsinline:!0,loop:!1,muted:!1,autoHide:!1,autoHideDelay:3e3,providerParams:{}}};class p{constructor(e,{options:t={},provider:i="html5",plugins:n=[],onReady:r=()=>{}}={}){if(typeof e=="string")this.media=document.querySelector(e);else{if(!(e instanceof HTMLVideoElement||e instanceof HTMLAudioElement||e instanceof HTMLDivElement))throw new TypeError("vlitejs :: The element or selector supplied is not valid.");this.media=e}this.provider=i,this.onReady=r,this.type=this.media instanceof HTMLAudioElement?"audio":"video",this.supportFullScreen=x(),["autoplay","playsinline","muted","loop"].forEach((o=>{this.media.hasAttribute(o)?t[o]=!0:t[o]&&this.media.setAttribute(o,"")})),this.options=Object.assign(Object.assign({},Z[this.type]),t),this.autoHideGranted=this.type==="video"&&!!this.options.autoHide&&!!this.options.controls,/(iPhone)/gi.test(window.navigator.userAgent)&&(this.options.fullscreen=!1),this.onClickOnPlayer=this.onClickOnPlayer.bind(this),this.onDoubleClickOnPlayer=this.onDoubleClickOnPlayer.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onChangeFullScreen=this.onChangeFullScreen.bind(this);const a=(function(o,c){const u=y[o];if(u)return u(c,T[o]);throw new Error(`vlitejs :: Unknown provider "${o}"`)})(i,N);this.wrapElement(),this.container=this.media.closest(".v-container"),this.outerContainer=this.container.closest(".v-vlite"),this.type==="video"&&this.renderLayout(),this.player=new a({type:this.type,Vlitejs:this}),this.player.build(),this.addEvents(),O({plugins:n,provider:i,type:this.type,player:this.player})}wrapElement(){const e=document.createElement("div");e.classList.add("v-vlite","v-firstStart","v-paused","v-loading",`v-${this.type}`);const t=document.createElement("div");t.setAttribute("tabindex","0"),t.classList.add("v-container"),e.appendChild(t),this.media.parentNode.insertBefore(e,this.media),t.appendChild(this.media)}renderLayout(){const e=`
			<div class="v-overlay"></div>
			
		<div class="v-loader">
			<div class="v-loaderContent">
				<div class="v-loaderBounce1"></div>
				<div class="v-loaderBounce2"></div>
				<div class="v-loaderBounce3"></div>
			</div>
		</div>
	
			${this.options.poster?(function({posterUrl:t=""}){return`<div class="v-poster v-active"${t&&` style="background-image: url(${t})"`}></div>`})({posterUrl:this.options.poster}):""}
			${this.options.bigPlay?'<button class="v-bigPlay" aria-label="Play"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0ZM7.5 12.67V7.33c0-.79.88-1.27 1.54-.84l4.15 2.67a1 1 0 0 1 0 1.68l-4.15 2.67c-.66.43-1.54-.05-1.54-.84Z"/></svg></button>':""}
		`;this.container.insertAdjacentHTML("beforeend",e)}addEvents(){this.type==="video"&&(this.container.addEventListener("click",this.onClickOnPlayer),this.container.addEventListener("dblclick",this.onDoubleClickOnPlayer),this.autoHideGranted&&this.container.addEventListener("mousemove",this.onMousemove),document.addEventListener(this.supportFullScreen.changeEvent,this.onChangeFullScreen))}onClickOnPlayer(e){const t=e.target,i=h({target:t,selectorString:".v-poster, .v-bigPlay",nodeName:["div","button"]}),n=h({target:t,selectorString:".v-overlay",nodeName:["div"]});(i||n&&!A())&&(this.player.controlBar.togglePlayPause(e),t.matches(".v-bigPlay")&&this.container.focus())}onDoubleClickOnPlayer(e){h({target:e.target,selectorString:".v-overlay",nodeName:["div"]})&&this.player.controlBar.toggleFullscreen(e)}onMousemove(){!this.player.isPaused&&this.autoHideGranted&&(this.stopAutoHideTimer(),this.startAutoHideTimer())}onChangeFullScreen(){!document[this.supportFullScreen.isFullScreen]&&this.player.isFullScreen&&this.player.exitFullscreen({escKey:!0})}stopAutoHideTimer(){this.type==="video"&&this.player.elements.controlBar&&(this.player.elements.controlBar.classList.remove("v-hidden"),clearTimeout(this.timerAutoHide))}startAutoHideTimer(){this.type==="video"&&!this.player.isPaused&&this.player.elements.controlBar&&(this.timerAutoHide=window.setTimeout((()=>{var e;(e=this.player.elements.controlBar)===null||e===void 0||e.classList.add("v-hidden")}),this.options.autoHideDelay))}removeEvents(){this.type==="video"&&(this.container.removeEventListener("click",this.onClickOnPlayer),this.container.removeEventListener("dblclick",this.onDoubleClickOnPlayer),this.autoHideGranted&&this.container.removeEventListener("mousemove",this.onMousemove),window.removeEventListener(this.supportFullScreen.changeEvent,this.onChangeFullScreen))}destroy(){this.removeEvents(),this.player.destroy(),this.player.controlBar.destroy()}}p.registerProvider=function(s,e,t){if(e!==void 0){if(!Object.keys(y).includes(s))return y[s]=e,void(t&&(T[s]=t));throw new Error(`vlitejs :: The provider id "${s}" is already registered.`)}throw new Error(`vlitejs :: The provider id "${s}" is undefined.`)},p.registerPlugin=function(s,e,t){if(e!==void 0){if(!Object.keys(m).includes(s))return m[s]=e,void(t&&(B[s]=t));throw new Error(`vlitejs :: The plugin id "${s}" is already registered.`)}throw new Error(`vlitejs :: The plugin id "${s}" is undefined.`)};const l={FADE_DISTANCE:900,SCROLL_ANIMATION_DELAY:100,SELECTORS:{nav:".nav",navToggle:".menu-nav-toggle",bgImage:".hero-bg-image img",searchIcon:".nav-search-icon",searchOverlay:"#searchOverlay",podcastMenu:".pod-links-menu details",scrollContainer:".posts-hori-scroll",suggestedPosts:".suggested-posts",categorySwitcher:".switch-btn"}},v={primaryNav:document.querySelector(l.SELECTORS.nav),navToggle:document.querySelector(l.SELECTORS.navToggle)},U=()=>{v.navToggle?.addEventListener("click",()=>{const s=v.primaryNav?.dataset.visible==="true";v.primaryNav?.setAttribute("data-visible",String(!s)),v.navToggle?.setAttribute("aria-expanded",String(!s))})},_=()=>{const s=document.querySelector(l.SELECTORS.bgImage);if(!s)return;let e=!1;new IntersectionObserver(i=>{i.forEach(n=>{if(n.isIntersecting){const r=()=>{e||(requestAnimationFrame(()=>{const a=Math.max(1-window.scrollY/l.FADE_DISTANCE,0);s.style.opacity=a,e=!1}),e=!0)};r(),window.addEventListener("scroll",r,{passive:!0})}})}).observe(s)},G=()=>{const s=document.querySelector(l.SELECTORS.searchIcon),e=document.querySelector(l.SELECTORS.searchOverlay);if(!s||!e)return;const t=()=>{const i=document.querySelector("#search-field");i&&document.activeElement===i&&i.blur(),e.setAttribute("aria-hidden","true"),document.body.classList.remove("overlay-active")};s.addEventListener("click",i=>{i.preventDefault(),e.setAttribute("aria-hidden","false"),document.body.classList.add("overlay-active");const n=document.querySelector("#search-field");n&&n.focus()}),e.addEventListener("click",({target:i})=>{i===e&&t()}),document.addEventListener("keydown",({key:i})=>{i==="Escape"&&e.getAttribute("aria-hidden")==="false"&&t()})},Y=()=>{const s=document.querySelector(l.SELECTORS.podcastMenu);if(!s)return;const e=({target:t})=>{s.open&&!s.contains(t)&&(s.open=!1)};document.addEventListener("click",e,{passive:!0})},z=()=>{const s=document.querySelectorAll(l.SELECTORS.scrollContainer);if(!s.length)return;const e=new Map;s.forEach(i=>{const n=i.closest(l.SELECTORS.suggestedPosts)?.querySelector(".suggested-posts-header");if(!n)return;const r=n.querySelector(".scroll-left"),a=n.querySelector(".scroll-right"),o=i.querySelector("article")?.offsetWidth??16,c=()=>{const d=i.scrollWidth-i.clientWidth;r.disabled=i.scrollLeft<=0,a.disabled=i.scrollLeft>=d-1};e.set(i,c);const u=d=>{i.scrollBy({left:d*o,behavior:"smooth"}),setTimeout(c,l.SCROLL_ANIMATION_DELAY)};r?.addEventListener("click",()=>u(-1)),a?.addEventListener("click",()=>u(1)),i.addEventListener("scroll",c,{passive:!0}),c()});const t=new ResizeObserver(i=>{i.forEach(n=>{const r=n.target,a=e.get(r);a&&a()})});s.forEach(i=>{t.observe(i)})},W=()=>{const s=document.querySelectorAll('a[target="_blank"]:not(.has-external-icon)');themeSettings.themeUrl,s.forEach(e=>{const t=document.createElement("span");t.innerHTML=`<svg width="16" height="16" viewBox="0 0 16 16" class="external-link-icon">
            <path d="M13 3L3 13M13 3H4M13 3V12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`,e.appendChild(t),e.classList.add("has-external-icon")})},J=()=>{const s=document.querySelector(".tardis-progress-container"),e=document.getElementById("tardis-fill"),t=document.getElementById("tardisProgressStatus"),i=document.querySelector(".post-featured-image"),n=document.querySelector(".post-article");if(document.querySelector("#comments"),!s||!e||!t||!n)return;const r=i?.offsetHeight||100,a=864;let o=!1;const c=()=>{const d=window.scrollY||window.pageYOffset,M=n.offsetTop+n.offsetHeight,g=window.innerHeight,f=M-g,E=Math.min(d/(f+100),1),k=Math.round(E*100);d>r&&d<f+g+-700?s.classList.add("visible"):s.classList.remove("visible");const F=a*(1-E);e.setAttribute("y",F),t.textContent=`Reading progress: ${k}%`,o=!1},u=()=>{o||(requestAnimationFrame(c),o=!0)};window.addEventListener("scroll",u,{passive:!0}),window.addEventListener("resize",u,{passive:!0}),c()},K=()=>{if(document.body.classList.contains("search-results"))return;const s=document.querySelectorAll(l.SELECTORS.categorySwitcher),e=document.getElementById("ajax-posts-container");if(!s.length||!e)return;const t=i=>{const n={action:"filter_posts_by_category",category:i,context:"home"};fetch(themeSettings.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n)}).then(r=>r.text()).then(r=>{e.innerHTML=r}).catch(r=>console.error("Category switch AJAX error:",r))};s.forEach(i=>{i.addEventListener("click",n=>{n.preventDefault();const r=i.dataset.category;s.forEach(a=>{a.setAttribute("aria-pressed","false"),a.classList.remove("is-active")}),i.setAttribute("aria-pressed","true"),i.classList.add("is-active"),t(r)})})},X=()=>{const s=document.querySelector(".rotating-sentence");if(!s)return;const e=s.querySelector(".rotating-sentence__dynamic");if(!e)return;let t;try{t=JSON.parse(s.dataset.phrases)}catch(r){console.error("Invalid phrases JSON:",r);return}if(!Array.isArray(t)||t.length<2)return;let i=0;e.textContent=t[i],e.classList.add("visible"),i=1,setInterval(()=>{e.classList.remove("visible"),setTimeout(()=>{e.textContent=t[i],e.classList.add("visible"),i=(i+1)%t.length},250)},5e3)},Q=()=>{const s=setInterval(()=>{document.querySelector("#player")&&typeof p<"u"&&(console.log("🎧 Initializing vLite…"),new p("#player",{controls:["play","current-time","progress","duration","volume"],volume:!0,autoplay:!1}),clearInterval(s))},100)},ee=()=>{const s=document.getElementById("era-jump");s&&s.addEventListener("change",function(e){const t=this.value;if(!t||!t.startsWith("#"))return;const i=t.slice(1),n=document.getElementById(i);if(!n)return;n.scrollIntoView({behavior:"smooth",block:"start"});const r=n.querySelector("h2, .table-heading");r?(r.setAttribute("tabindex","-1"),setTimeout(()=>{r.focus({preventScroll:!0}),r.removeAttribute("tabindex")},350)):(n.setAttribute("tabindex","-1"),setTimeout(()=>{n.focus({preventScroll:!0}),n.removeAttribute("tabindex")},350)),history.replaceState(null,"",t),this.selectedIndex=0,e&&typeof e.preventDefault=="function"&&e.preventDefault()})},L=()=>{U(),_(),G(),Y(),z(),W(),J(),K(),X(),ee(),window.addEventListener("DOMContentLoaded",Q)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",L):L();
