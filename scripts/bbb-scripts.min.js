const e={},t={};function s({plugins:s,provider:i,type:n,player:r}){(function(s){const i=[],n=Object.keys(e);return s.forEach(s=>{if(!n.includes(s))throw new Error(`vlitejs :: Unknown plugin "${s}".`);i.push({id:s,Plugin:e[s],options:t[s]})}),i})(s).forEach(({id:e,Plugin:t,options:s})=>{const o=new t({player:r,options:s});if(r.plugins[e]=o,!o.providers.includes(i)||!o.types.includes(n))throw new Error(`vlitejs :: The "${e}" plugin is only compatible with providers:"${o.providers}" and types:"${o.types}"`);o.init()})}const i={html5:function(e){return class extends e{constructor(e){super(e),this.events=[{type:"timeupdate",listener:super.onTimeUpdate},{type:"ended",listener:super.onMediaEnded},{type:"playing",listener:this.onPlaying},{type:"waiting",listener:this.onWaiting},{type:"seeking",listener:this.onSeeking},{type:"seeked",listener:this.onSeeked}]}init(){this.waitUntilVideoIsReady().then(()=>{this.addSpecificEvents(),super.onReady()})}waitUntilVideoIsReady(){return new window.Promise(e=>{this.media.readyState>=2&&this.media.duration||0===this.media.readyState&&"none"===this.media.preload?e():(this.media.addEventListener("loadedmetadata",e,{once:!0}),this.media.addEventListener("canplay",e,{once:!0}))})}addSpecificEvents(){this.events.forEach(e=>{this.media.addEventListener(e.type,e.listener.bind(this))})}getInstance(){return this.media}getCurrentTime(){return new window.Promise(e=>e(this.media.currentTime))}getDuration(){return new window.Promise(e=>e(this.media.duration))}methodPlay(){this.media.play()}methodPause(){this.media.pause()}methodSetVolume(e){this.media.volume=e}methodGetVolume(){return new window.Promise(e=>e(this.media.volume))}methodMute(){this.media.muted=!0,this.media.setAttribute("muted","")}methodUnMute(){this.media.muted=!1,this.media.removeAttribute("muted")}methodSeekTo(e){this.media.currentTime=e}onWaiting(){this.loading(!0)}onPlaying(){this.loading(!1)}onSeeking(){this.loading(!0)}onSeeked(){this.loading(!1)}removeSpecificEvents(){this.events.forEach(e=>{this.media.removeEventListener(e.type,e.listener)})}destroy(){this.removeSpecificEvents(),super.destroy()}}}},n={};function r(e){const t=1e3*e,s=t/1e3/60|0,i=t/1e3%60|0;let n="";return n+=s<10?"0":"",n+=`${s}:`,n+=i<10?"0":"",n+=i,n}function o(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function a({target:e,selectorString:t,nodeName:s}){return(s=[].concat(s)).some(s=>e.nodeName.toLowerCase()===s&&e.matches(t))}function l({isMuted:e}){return`<button class="v-volumeButton v-controlButton${e?" v-controlPressed":""}"><svg class="v-iconUnpressed" viewBox="0 0 18 17" xmlns="http://www.w3.org/2000/svg"><path d="M0 6.461v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V2.871c0-.89-1.08-1.34-1.71-.71L4 5.461H1c-.55 0-1 .45-1 1Zm13.5 2a4.5 4.5 0 0 0-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02ZM11 .911v.2c0 .38.25.71.6.85a7.004 7.004 0 0 1 4.4 6.5c0 2.94-1.82 5.47-4.4 6.5-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85a8.98 8.98 0 0 0 5.79-8.4c0-3.84-2.4-7.11-5.79-8.4-.58-.23-1.21.22-1.21.85Z"/></svg><svg class="v-iconPressed" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M.63.292a.996.996 0 0 0 0 1.41l3.66 3.66-.29.3H1c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.997.997 0 1 0 1.41-1.41L2.05.293c-.39-.39-1.02-.39-1.42 0ZM16 8.662c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85 2.57 1.04 4.39 3.56 4.39 6.5Zm-8.71-6.29-.17.17L9 4.422v-1.35c0-.89-1.08-1.33-1.71-.7Zm6.21 6.29a4.5 4.5 0 0 0-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24Z"/></svg></button>`}class c{constructor({player:e,type:t}){this.player=e,this.type=t,this.touchEvents=["touchstart","touchmove","touchend"],this.onInputProgressBar=this.onInputProgressBar.bind(this),this.onTouchEventProgressBar=this.onTouchEventProgressBar.bind(this),this.onClickOnControlBar=this.onClickOnControlBar.bind(this),this.togglePlayPause=this.togglePlayPause.bind(this),this.toggleVolume=this.toggleVolume.bind(this),this.toggleFullscreen=this.toggleFullscreen.bind(this)}init(){this.render(),this.cacheElements(),this.addEvents()}cacheElements(){const e=this.player.elements.container.querySelector(".v-controlBar");e&&(this.player.elements.controlBar=e,this.player.elements.playPause=e.querySelector(".v-playPauseButton"),this.player.elements.progressBar=e.querySelector(".v-progressBar"),this.player.elements.currentTime=e.querySelector(".v-currentTime"),this.player.elements.duration=e.querySelector(".v-duration"),this.player.elements.volume=e.querySelector(".v-volumeButton"),this.player.elements.fullscreen=e.querySelector(".v-fullscreenButton"),this.player.elements.volume&&this.player.elements.volume.setAttribute("aria-label",this.player.isMuted?"Unmute":"Mute"))}render(){this.player.elements.container.insertAdjacentHTML("beforeend",this.getTemplate())}onReady(){this.player.getDuration().then(e=>{this.player.elements.progressBar&&this.player.elements.progressBar.setAttribute("aria-valuemax",`${Math.round(e)}`),this.player.elements.duration&&(this.player.elements.duration.innerHTML=r(e))})}addEvents(){var e;this.player.elements.progressBar&&(this.player.elements.progressBar.addEventListener("input",this.onInputProgressBar),this.player.isTouch&&this.touchEvents.forEach(e=>{this.player.elements.progressBar.addEventListener(e,this.onTouchEventProgressBar)})),null===(e=this.player.elements.controlBar)||void 0===e||e.addEventListener("click",this.onClickOnControlBar)}onTouchEventProgressBar(e){e.preventDefault();const t=e.target,s=Number.parseFloat(t.getAttribute("max")||"100"),i=t.getBoundingClientRect(),n=(e.changedTouches[0].clientX-i.left)/i.width*100;t.value=""+100*n/s,t.dispatchEvent(new Event("input"))}onInputProgressBar(e){const t=e.target;t.style.setProperty("--vlite-progressValue",`${t.value}%`),this.player.elements.outerContainer.classList.contains("v-firstStart")&&this.player.play(),this.player.getDuration().then(e=>{this.player.seekTo(Number.parseFloat(t.value)*e/100)})}onClickOnControlBar(e){const t=e.target,s=a({target:t,selectorString:".v-playPauseButton",nodeName:["button"]}),i=a({target:t,selectorString:".v-volumeButton",nodeName:["button"]}),n=a({target:t,selectorString:".v-fullscreenButton",nodeName:["button"]});s?this.togglePlayPause(e):i?this.toggleVolume(e):n&&this.toggleFullscreen(e),(s||i||n)&&this.player.elements.container.focus(),this.player.Vlitejs.startAutoHideTimer()}togglePlayPause(e){e.preventDefault(),this.player.elements.outerContainer.classList.contains("v-paused")?this.player.play():this.player.pause()}toggleVolume(e){e.preventDefault(),this.player.elements.volume.classList.contains("v-controlPressed")?this.player.unMute():this.player.mute()}toggleFullscreen(e){if(e.preventDefault(),this.player.isFullScreen)this.isOrientationApiAvailable()&&window.screen.orientation.unlock(),this.player.exitFullscreen();else{this.player.requestFullscreen();try{window.matchMedia("(orientation:portrait)").matches&&this.isOrientationApiAvailable()&&window.screen.orientation.lock("landscape").catch(()=>{})}catch(e){}}}isOrientationApiAvailable(){return window.screen.orientation&&!window.screen.mozOrientation}getTemplate(){return`${function({options:e,isMuted:t,isVideo:s}){return s?`<div class="v-controlBar">${e.playPause?'<button class="v-playPauseButton v-controlButton" aria-label="Play"><svg class="v-iconUnpressed" viewBox="0 0 11 13" xmlns="http://www.w3.org/2000/svg"><path d="M0 1v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L1.54.16A.998.998 0 0 0 0 1Z"/></svg><svg class="v-iconPressed" viewBox="0 0 12 14" xmlns="http://www.w3.org/2000/svg"><path d="M2 14c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2S0 .9 0 2v10c0 1.1.9 2 2 2ZM8 2v10c0 1.1.9 2 2 2s2-.9 2-2V2c0-1.1-.9-2-2-2S8 .9 8 2Z"/></svg></button>':""}${e.time?'<div class="v-time"><span class="v-currentTime">00:00</span>&nbsp;/&nbsp;<span class="v-duration"></span></div>':""}${e.progressBar?'<input type="range" class="v-progressBar v-progressBarStyle" min="0" max="100" step="0.01" value="0" aria-label="Seek" aria-valuemin="0" />':""}${e.volume?l({isMuted:t}):""}${e.fullscreen?'<button class="v-fullscreenButton v-controlButton" aria-label="Enter fullscreen"><svg class="v-iconUnpressed" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M1 9c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1H2v-2c0-.55-.45-1-1-1Zm0-4c.55 0 1-.45 1-1V2h2c.55 0 1-.45 1-1s-.45-1-1-1H1C.45 0 0 .45 0 1v3c0 .55.45 1 1 1Zm11 7h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1s-1 .45-1 1v2ZM9 1c0 .55.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V1c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1Z"/></svg><svg class="v-iconPressed" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="M1 11h2v2c0 .55.45 1 1 1s1-.45 1-1v-3c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1s.45 1 1 1Zm2-8H1c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1S3 .45 3 1v2Zm7 11c.55 0 1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1h-3c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1Zm1-11V1c0-.55-.45-1-1-1S9 .45 9 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1h-2Z"/></svg></span></button>':""}</div>`:`<div class="v-controlBar">${e.playPause?'<button class="v-playPauseButton v-controlButton" aria-label="Play"><svg class="v-iconUnpressed" viewBox="0 0 11 13" xmlns="http://www.w3.org/2000/svg"><path d="M0 1v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L1.54.16A.998.998 0 0 0 0 1Z"/></svg><svg class="v-iconPressed" viewBox="0 0 12 14" xmlns="http://www.w3.org/2000/svg"><path d="M2 14c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2S0 .9 0 2v10c0 1.1.9 2 2 2ZM8 2v10c0 1.1.9 2 2 2s2-.9 2-2V2c0-1.1-.9-2-2-2S8 .9 8 2Z"/></svg></button>':""}${e.time?'<div class="v-time"><span class="v-currentTime">00:00</span>&nbsp;/&nbsp;<span class="v-duration"></span></div>':""}${e.progressBar?'<input type="range" class="v-progressBar v-progressBarStyle" min="0" max="100" step="0.01" value="0" aria-label="Seek" aria-valuemin="0" />':""}${e.volume?l({isMuted:t}):""}</div>`}({options:this.player.options,isMuted:this.player.isMuted,isVideo:"video"===this.type})}`}removeEvents(){var e;this.player.elements.progressBar&&(this.player.elements.progressBar.removeEventListener("input",this.onInputProgressBar),this.player.isTouch&&this.touchEvents.forEach(e=>{this.player.elements.progressBar.removeEventListener(e,this.onTouchEventProgressBar)})),null===(e=this.player.elements.controlBar)||void 0===e||e.removeEventListener("click",this.onClickOnControlBar)}destroy(){var e;this.removeEvents(),null===(e=this.player.elements.controlBar)||void 0===e||e.remove()}}class d{constructor({Vlitejs:e,type:t}){this.Vlitejs=e,this.type=t,this.plugins={},this.media=e.media,this.options=e.options,this.isCast=!1,this.isLinearAd=!1,this.elements={container:e.container,outerContainer:e.outerContainer,bigPlay:e.container.querySelector(".v-bigPlay"),poster:e.container.querySelector(".v-poster"),controlBar:null,playPause:null,progressBar:null,currentTime:null,duration:null,volume:null,fullscreen:null},this.isFullScreen=!1,this.isMuted=this.options.muted,this.isPaused=null,this.playerEvents=[],this.isTouch=o(),this.controlBar=new c({player:this,type:t})}build(){this.options.controls&&this.controlBar.init(),this.init()}onReady(){this.options.muted&&this.mute(),this.media.classList.add("v-media"),this.media.setAttribute("tabindex","-1"),this.options.autoplay&&(!this.media.muted&&this.mute(),this.play()),this.Vlitejs.onReady instanceof Function&&this.Vlitejs.onReady.call(this,this),"none"===this.media.preload&&"html5"===this.Vlitejs.provider?this.media.addEventListener("loadedmetadata",()=>this.triggerOnReady()):this.triggerOnReady(),this.loading(!1)}triggerOnReady(){this.options.controls&&this.controlBar.onReady(),Object.keys(this.plugins).forEach(e=>{this.plugins[e].onReady instanceof Function&&this.plugins[e].onReady()})}on(e,t){t instanceof Function&&(this.playerEvents.push({type:e,listener:t}),this.elements.container.addEventListener(e,t))}off(e,t){t instanceof Function&&this.elements.container.removeEventListener(e,t)}dispatchEvent(e,t){this.elements.container.dispatchEvent(new window.CustomEvent(e,{detail:t}))}loading(e){this.elements.outerContainer.classList[e?"add":"remove"]("v-loading"),this.dispatchEvent("progress")}onTimeUpdate(){this.options.time&&Promise.all([this.getCurrentTime(),this.getDuration()]).then(([e,t])=>this.updateProgressBar({seconds:e,duration:t}))}updateProgressBar({seconds:e,duration:t,isRemote:s=!1}){const i=Math.round(e);if(this.elements.progressBar){const s=100*i/t;this.elements.progressBar.value=`${s}`,this.elements.progressBar.style.setProperty("--vlite-progressValue",`${s}%`),this.elements.progressBar.setAttribute("aria-valuenow",`${Math.round(e)}`)}this.elements.currentTime&&(this.elements.currentTime.innerHTML=r(i)),!s&&this.dispatchEvent("timeupdate")}onMediaEnded(){this.options.loop?this.play():(this.elements.outerContainer.classList.replace("v-playing","v-paused"),this.elements.outerContainer.classList.add("v-firstStart"),this.isPaused=null),this.elements.poster&&this.elements.poster.classList.add("v-active"),this.elements.progressBar&&(this.elements.progressBar.value="0",this.elements.progressBar.style.setProperty("--vlite-progressValue","0%"),this.elements.progressBar.removeAttribute("aria-valuenow")),this.elements.currentTime&&(this.elements.currentTime.innerHTML="00:00"),this.dispatchEvent("ended")}play(){this.isLinearAd||(null===this.isPaused&&(this.elements.outerContainer.classList.remove("v-firstStart"),"video"===this.type&&this.elements.poster&&this.elements.poster.classList.remove("v-active")),!this.isCast&&this.methodPlay(),this.isPaused=!1,this.elements.outerContainer.classList.replace("v-paused","v-playing"),this.elements.playPause&&(this.elements.playPause.setAttribute("aria-label","Pause"),this.elements.playPause.classList.add("v-controlPressed")),"video"===this.type&&this.elements.bigPlay&&this.elements.bigPlay.setAttribute("aria-label","Pause"),this.afterPlayPause(),this.dispatchEvent("play"))}pause(){!this.isCast&&this.methodPause(),this.isPaused=!0,this.elements.outerContainer.classList.replace("v-playing","v-paused"),this.elements.playPause&&(this.elements.playPause.setAttribute("aria-label","Play"),this.elements.playPause.classList.remove("v-controlPressed")),"video"===this.type&&this.elements.bigPlay&&this.elements.bigPlay.setAttribute("aria-label","Play"),this.afterPlayPause(),this.dispatchEvent("pause")}afterPlayPause(){this.Vlitejs.autoHideGranted&&(this.Vlitejs.stopAutoHideTimer(),!this.isPaused&&this.Vlitejs.startAutoHideTimer())}setVolume(e){let t=e;t>1?t=1:t<=0?(t=0,this.isMuted=!0,this.elements.volume&&this.elements.volume.classList.add("v-controlPressed")):(this.isMuted=!1,this.elements.volume&&this.elements.volume.classList.remove("v-controlPressed")),this.methodSetVolume(t),this.dispatchEvent("volumechange",{volume:t})}getVolume(){return new window.Promise(e=>{this.methodGetVolume().then(t=>{e(t)})})}mute(){this.methodMute(),this.isMuted=!0,this.elements.volume&&(this.elements.volume.classList.add("v-controlPressed"),this.elements.volume.setAttribute("aria-label","Unmute")),this.dispatchEvent("volumechange")}unMute(){this.methodUnMute(),this.isMuted=!1,this.elements.volume&&(this.elements.volume.classList.remove("v-controlPressed"),this.elements.volume.setAttribute("aria-label","Mute")),this.dispatchEvent("volumechange")}seekTo(e){this.methodSeekTo(e)}requestFullscreen(){const{requestFn:e}=this.Vlitejs.supportFullScreen;this.media[e]&&(this.elements.container[e](),this.isFullScreen=!0,this.elements.outerContainer.classList.add("v-fullscreen"),this.elements.fullscreen&&(this.elements.fullscreen.classList.add("v-controlPressed"),this.elements.fullscreen.setAttribute("aria-label","Exit fullscreen")),this.dispatchEvent("enterfullscreen"))}exitFullscreen({escKey:e=!1}={}){const{cancelFn:t}=this.Vlitejs.supportFullScreen;document[t]&&(!e&&document[t](),this.isFullScreen=!1,this.elements.outerContainer.classList.remove("v-fullscreen"),this.elements.fullscreen&&(this.elements.fullscreen.classList.remove("v-controlPressed"),this.elements.fullscreen.setAttribute("aria-label","Enter fullscreen")),this.dispatchEvent("exitfullscreen"))}destroy(){var e;null===(e=this.controlBar)||void 0===e||e.destroy(),Object.keys(this.plugins).forEach(e=>{this.plugins[e].destroy instanceof Function&&this.plugins[e].destroy()}),this.playerEvents.forEach(e=>{this.elements.container.removeEventListener(e.type,e.listener)}),this.elements.container.remove()}}const u={audio:{controls:!0,autoplay:!1,playPause:!0,progressBar:!0,time:!0,volume:!0,loop:!1},video:{controls:!0,autoplay:!1,playPause:!0,progressBar:!0,time:!0,volume:!0,fullscreen:!0,poster:null,bigPlay:!0,playsinline:!0,loop:!1,muted:!1,autoHide:!1,autoHideDelay:3e3,providerParams:{}}};class h{constructor(e,{options:t={},provider:r="html5",plugins:o=[],onReady:a=()=>{}}={}){if("string"==typeof e)this.media=document.querySelector(e);else{if(!(e instanceof HTMLVideoElement||e instanceof HTMLAudioElement||e instanceof HTMLDivElement))throw new TypeError("vlitejs :: The element or selector supplied is not valid.");this.media=e}this.provider=r,this.onReady=a,this.type=this.media instanceof HTMLAudioElement?"audio":"video",this.supportFullScreen=function(){const e=document.exitFullscreen instanceof Function?"":["webkit","moz","ms"].find(e=>document[`${e}ExitFullscreen`]instanceof Function||document[`${e}CancelFullScreen`]instanceof Function)||"";return{requestFn:e?`${e}RequestFullScreen`:"requestFullscreen",cancelFn:e?`${e}ExitFullscreen`:"exitFullscreen",changeEvent:e?`${e}fullscreenchange`:"fullscreenchange",isFullScreen:e?`${e}FullscreenElement`:"fullscreenElement"}}(),["autoplay","playsinline","muted","loop"].forEach(e=>{this.media.hasAttribute(e)?t[e]=!0:t[e]&&this.media.setAttribute(e,"")}),this.options=Object.assign(Object.assign({},u[this.type]),t),this.autoHideGranted="video"===this.type&&!!this.options.autoHide&&!!this.options.controls,/(iPhone)/gi.test(window.navigator.userAgent)&&(this.options.fullscreen=!1),this.onClickOnPlayer=this.onClickOnPlayer.bind(this),this.onDoubleClickOnPlayer=this.onDoubleClickOnPlayer.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onChangeFullScreen=this.onChangeFullScreen.bind(this);const l=function(e,t){const s=i[e];if(s)return s(t,n[e]);throw new Error(`vlitejs :: Unknown provider "${e}"`)}(r,d);this.wrapElement(),this.container=this.media.closest(".v-container"),this.outerContainer=this.container.closest(".v-vlite"),"video"===this.type&&this.renderLayout(),this.player=new l({type:this.type,Vlitejs:this}),this.player.build(),this.addEvents(),s({plugins:o,provider:r,type:this.type,player:this.player})}wrapElement(){const e=document.createElement("div");e.classList.add("v-vlite","v-firstStart","v-paused","v-loading",`v-${this.type}`);const t=document.createElement("div");t.setAttribute("tabindex","0"),t.classList.add("v-container"),e.appendChild(t),this.media.parentNode.insertBefore(e,this.media),t.appendChild(this.media)}renderLayout(){const e=`\n\t\t\t<div class="v-overlay"></div>\n\t\t\t\n\t\t<div class="v-loader">\n\t\t\t<div class="v-loaderContent">\n\t\t\t\t<div class="v-loaderBounce1"></div>\n\t\t\t\t<div class="v-loaderBounce2"></div>\n\t\t\t\t<div class="v-loaderBounce3"></div>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t\t${this.options.poster?function({posterUrl:e=""}){return`<div class="v-poster v-active"${e&&` style="background-image: url(${e})"`}></div>`}({posterUrl:this.options.poster}):""}\n\t\t\t${this.options.bigPlay?'<button class="v-bigPlay" aria-label="Play"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0ZM7.5 12.67V7.33c0-.79.88-1.27 1.54-.84l4.15 2.67a1 1 0 0 1 0 1.68l-4.15 2.67c-.66.43-1.54-.05-1.54-.84Z"/></svg></button>':""}\n\t\t`;this.container.insertAdjacentHTML("beforeend",e)}addEvents(){"video"===this.type&&(this.container.addEventListener("click",this.onClickOnPlayer),this.container.addEventListener("dblclick",this.onDoubleClickOnPlayer),this.autoHideGranted&&this.container.addEventListener("mousemove",this.onMousemove),document.addEventListener(this.supportFullScreen.changeEvent,this.onChangeFullScreen))}onClickOnPlayer(e){const t=e.target,s=a({target:t,selectorString:".v-poster, .v-bigPlay",nodeName:["div","button"]}),i=a({target:t,selectorString:".v-overlay",nodeName:["div"]});(s||i&&!o())&&(this.player.controlBar.togglePlayPause(e),t.matches(".v-bigPlay")&&this.container.focus())}onDoubleClickOnPlayer(e){a({target:e.target,selectorString:".v-overlay",nodeName:["div"]})&&this.player.controlBar.toggleFullscreen(e)}onMousemove(){!this.player.isPaused&&this.autoHideGranted&&(this.stopAutoHideTimer(),this.startAutoHideTimer())}onChangeFullScreen(){!document[this.supportFullScreen.isFullScreen]&&this.player.isFullScreen&&this.player.exitFullscreen({escKey:!0})}stopAutoHideTimer(){"video"===this.type&&this.player.elements.controlBar&&(this.player.elements.controlBar.classList.remove("v-hidden"),clearTimeout(this.timerAutoHide))}startAutoHideTimer(){"video"===this.type&&!this.player.isPaused&&this.player.elements.controlBar&&(this.timerAutoHide=window.setTimeout(()=>{var e;null===(e=this.player.elements.controlBar)||void 0===e||e.classList.add("v-hidden")},this.options.autoHideDelay))}removeEvents(){"video"===this.type&&(this.container.removeEventListener("click",this.onClickOnPlayer),this.container.removeEventListener("dblclick",this.onDoubleClickOnPlayer),this.autoHideGranted&&this.container.removeEventListener("mousemove",this.onMousemove),window.removeEventListener(this.supportFullScreen.changeEvent,this.onChangeFullScreen))}destroy(){this.removeEvents(),this.player.destroy(),this.player.controlBar.destroy()}}h.registerProvider=function(e,t,s){if(void 0!==t){if(!Object.keys(i).includes(e))return i[e]=t,void(s&&(n[e]=s));throw new Error(`vlitejs :: The provider id "${e}" is already registered.`)}throw new Error(`vlitejs :: The provider id "${e}" is undefined.`)},h.registerPlugin=function(s,i,n){if(void 0!==i){if(!Object.keys(e).includes(s))return e[s]=i,void(n&&(t[s]=n));throw new Error(`vlitejs :: The plugin id "${s}" is already registered.`)}throw new Error(`vlitejs :: The plugin id "${s}" is undefined.`)};const m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},p=([e,t,s])=>{const i=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(e=>{i.setAttribute(e,String(t[e]))}),s?.length&&s.forEach(e=>{const t=p(e);i.appendChild(t)}),i},v=e=>"string"==typeof e?e:e&&e.class?e.class&&"string"==typeof e.class?e.class.split(" "):e.class&&Array.isArray(e.class)?e.class:"":"",y=(e,{nameAttr:t,icons:s,attrs:i})=>{const n=e.getAttribute(t);if(null==n)return;const r=s[n.replace(/(\w)(\w*)(_|-|\s*)/g,(e,t,s)=>t.toUpperCase()+s.toLowerCase())];if(!r)return;const o=(e=>Array.from(e.attributes).reduce((e,t)=>(e[t.name]=t.value,e),{}))(e),a={...m,"data-lucide":n,...i,...o},l=["lucide",`lucide-${n}`,o,i].flatMap(v).map(e=>e.trim()).filter(Boolean).filter((e,t,s)=>s.indexOf(e)===t).join(" ");l&&Object.assign(a,{class:l});const c=((e,t={})=>{const s={...m,...t};return p(["svg",s,e])})(r,a);return e.parentNode?.replaceChild(c,e)},g=({icons:e={},nameAttr:t="data-lucide",attrs:s={},root:i=document}={})=>{if(!Object.values(e).length)throw new Error("Please provide an icons object.\nIf you want to use all the icons you can import it like:\n `import { createIcons, icons } from 'lucide';\nlucide.createIcons({icons});`");if(void 0===i)throw new Error("`createIcons()` only works in a browser environment.");const n=i.querySelectorAll(`[${t}]`);if(Array.from(n).forEach(i=>y(i,{nameAttr:t,icons:e,attrs:s})),"data-lucide"===t){const t=i.querySelectorAll("[icon-name]");t.length>0&&Array.from(t).forEach(t=>y(t,{nameAttr:"icon-name",icons:e,attrs:s}))}},f={Mic:[["path",{d:"M12 19v3"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3"}]],Headphones:[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"}]],ArrowUp:[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]],ArrowDown:[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]],ArrowLeft:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],ArrowRight:[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],ArrowUpRight:[["path",{d:"M7 7h10v10"}],["path",{d:"M7 17 17 7"}]],ChevronDown:[["path",{d:"m6 9 6 6 6-6"}]],Newspaper:[["path",{d:"M15 18h-5"}],["path",{d:"M18 14h-8"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1"}]],Rss:[["path",{d:"M4 11a9 9 0 0 1 9 9"}],["path",{d:"M4 4a16 16 0 0 1 16 16"}],["circle",{cx:"5",cy:"19",r:"1"}]],LayoutList:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}],["path",{d:"M14 4h7"}],["path",{d:"M14 9h7"}],["path",{d:"M14 15h7"}],["path",{d:"M14 20h7"}]],Reply:[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"}],["path",{d:"m9 17-5-5 5-5"}]],Clock:[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]],Search:[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]],X:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],Tag:[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]]};g({icons:f});h.registerPlugin("episodeMeta",class{constructor({player:e}){this.player=e,this.providers=["html5"],this.types=["audio"],this.metaElement=null}init(){const{media:e,elements:t}=this.player;if(!e||!t?.controlBar)return;const s=e.dataset?.episodeNumber?.trim(),i=e.dataset?.episodeTitle?.trim();if(s||i){if(this.metaElement=document.createElement("div"),this.metaElement.className="v-player-meta",s){const e=document.createElement("span");e.className="v-player-meta__number",e.textContent=s,this.metaElement.appendChild(e)}if(i){const e=document.createElement("span");e.className="v-player-meta__title",e.textContent=i,this.metaElement.appendChild(e)}t.controlBar.closest(".v-container")?.insertBefore(this.metaElement,t.controlBar)}}destroy(){this.metaElement?.remove()}});const w=900,b=100,E={nav:".nav-drawer",navToggle:".menu-nav-toggle",bgImage:".hero-bg-image",searchIcon:".nav-search-icon",searchOverlay:"#searchOverlay",podcastMenu:".pod-links-menu details",scrollContainer:".posts-hori-scroll",suggestedPosts:".suggested-posts",categorySwitcher:".switch-btn"},P={primaryNav:document.querySelector(E.nav),navToggle:document.querySelector(E.navToggle)};(()=>{const e=/Mac|iPhone|iPad/.test(navigator.platform);document.documentElement.dataset.os=e?"mac":"other"})();const L=()=>{if(document.body.matches(".search-results, .search-no-results"))return;const e=document.querySelectorAll(E.categorySwitcher),t=document.getElementById("ajax-posts-container"),s=document.getElementById("ajax-posts-status");if(!e.length||!t)return;let i=0;const n=t=>{e.forEach(e=>{e.disabled=t})},r=()=>{t.removeAttribute("aria-busy"),s&&(s.textContent="Posts updated")},o=e=>{const o=++i;n(!0),t.setAttribute("aria-busy","true"),s&&(s.textContent="Loading posts");const a=new URLSearchParams({action:"filter_posts_by_category",category:e,context:"home",nonce:themeSettings.filterNonce??""});fetch(themeSettings.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then(e=>e.json()).then(e=>{if(o!==i)return;if(!e?.success)throw new Error(e?.data||"Request failed");const s=e.data?.content??"";t.innerHTML=s,t.classList.add("enter-setup"),t.offsetHeight,t.classList.remove("enter-setup"),t.classList.add("enter-active"),setTimeout(()=>{t.classList.remove("enter-active")},260),r(),n(!1)}).catch(e=>{t.innerHTML='<p class="ajax-error">'+(e?.message||"Unable to load posts.")+"</p>",s&&(s.textContent=e?.message||"Unable to load posts."),r(),n(!1)})};e.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const i=t.dataset.category;e.forEach(e=>{e.setAttribute("aria-pressed","false"),e.classList.remove("is-active")}),t.setAttribute("aria-pressed","true"),t.classList.add("is-active"),o(i)})})},S=()=>{const e=setInterval(()=>{document.querySelector("#player")&&void 0!==h&&(new h("#player",{controls:["play","current-time","progress","duration","volume"],volume:!0,autoplay:!1,plugins:["episodeMeta"]}),clearInterval(e))},100)},B=()=>{const e=document.getElementById("era-jump");e&&e.addEventListener("change",function(){const e=this.value;e&&e.startsWith("#")&&(window.location.hash=e,requestAnimationFrame(()=>{const t=document.getElementById(e.slice(1));if(!t)return;const s=t.querySelector("h2, .table-heading")||t;s.setAttribute("tabindex","-1"),s.focus({preventScroll:!0}),setTimeout(()=>s.removeAttribute("tabindex"),150)}),this.selectedIndex=0)})},A=()=>{const e=document.querySelector("[data-compendium-rotation][data-image-dir]");if(!e)return;let t;try{t=JSON.parse(e.dataset.compendiumRotation||"[]")}catch(e){return}if(!Array.isArray(t)||t.length<2)return;const s=(e.dataset.imageDir||"").replace(/\/$/,"");if(!s)return;const i=e.dataset.imageAlt||"";let n=e.querySelector(".review-compendium-link__image");if(!n)return;let r=n.cloneNode(!0);r.classList.remove("is-active"),e.appendChild(r);let o=Number.parseInt(e.dataset.initialIndex,10);(Number.isNaN(o)||o<0||o>=t.length)&&(o=0);const a=()=>{const e=(o+1)%t.length,l=((e,t)=>{const n=`${s}/${t}`;e.querySelector('source[type="image/avif"]')?.setAttribute("srcset",`${n}.avif`),e.querySelector('source[type="image/webp"]')?.setAttribute("srcset",`${n}.webp`);const r=e.querySelector("img");return r&&(r.src=`${n}.webp`,r.alt=i),r})(r,t[e]);if(!l)return;const c=()=>{r.classList.add("is-active"),n.classList.remove("is-active"),[n,r]=[r,n],o=e,setTimeout(a,6e3)};if(l.complete&&l.naturalWidth)c();else{const e=()=>{l.removeEventListener("load",e),l.removeEventListener("error",e),c()};l.addEventListener("load",e),l.addEventListener("error",e)}};setTimeout(a,6e3)},M=()=>{P.navToggle?.addEventListener("click",()=>{const e="true"===P.primaryNav?.dataset.visible;P.primaryNav?.setAttribute("data-visible",String(!e)),P.navToggle?.setAttribute("aria-expanded",String(!e))}),(()=>{const e=document.querySelector(E.bgImage);if(!e)return;let t=!1;new IntersectionObserver(s=>{s.forEach(s=>{if(s.isIntersecting){const s=()=>{t||(requestAnimationFrame(()=>{const s=Math.max(1-window.scrollY/w,0);e.style.opacity=s,t=!1}),t=!0)};s(),window.addEventListener("scroll",s,{passive:!0})}})}).observe(e)})(),(()=>{const e=document.querySelector(E.searchIcon),t=document.querySelector(E.searchOverlay);if(!e||!t)return;const s=()=>t.querySelector(".search-field"),i=()=>{const e=s();e&&document.activeElement===e&&e.blur(),t.setAttribute("aria-hidden","true"),document.body.classList.remove("overlay-active")},n=()=>{if("false"===t.getAttribute("aria-hidden"))return;t.setAttribute("aria-hidden","false"),document.body.classList.add("overlay-active");const e=s();e&&requestAnimationFrame(()=>{e.focus()})};e.addEventListener("click",e=>{e.preventDefault(),n()}),t.addEventListener("click",({target:e})=>{e===t&&i()}),document.addEventListener("keydown",e=>{const{key:s,metaKey:r,ctrlKey:o}=e;if("Escape"===s&&"false"===t.getAttribute("aria-hidden"))return void i();if("k"!==s.toLowerCase()||!r&&!o)return;const a=document.activeElement;a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable)||(e.preventDefault(),n())})})(),(()=>{const e=document.querySelector(E.podcastMenu);if(!e)return;document.addEventListener("click",({target:t})=>{e.open&&!e.contains(t)&&(e.open=!1)},{passive:!0})})(),(()=>{const e=document.querySelectorAll(E.scrollContainer);if(!e.length)return;const t=new Map;e.forEach(e=>{const s=e.closest(E.suggestedPosts)?.querySelector(".suggested-posts-header");if(!s)return;const i=s.querySelector(".scroll-left"),n=s.querySelector(".scroll-right"),r=e.querySelector("article")?.offsetWidth??16,o=()=>{const t=e.scrollWidth-e.clientWidth;i.disabled=e.scrollLeft<=0,n.disabled=e.scrollLeft>=t-1};t.set(e,o);const a=t=>{e.scrollBy({left:t*r,behavior:"smooth"}),setTimeout(o,b)};i?.addEventListener("click",()=>a(-1)),n?.addEventListener("click",()=>a(1)),e.addEventListener("scroll",o,{passive:!0}),o()});const s=new ResizeObserver(e=>{e.forEach(e=>{const s=e.target,i=t.get(s);i&&i()})});e.forEach(e=>{s.observe(e)})})(),(()=>{const e=[];if(document.body.classList.contains("single-post")&&e.push(".post-content"),document.body.classList.contains("page")&&e.push(".site-main"),!e.length)return;const t=document.querySelectorAll(e.join(","));if(!t.length)return;const s=themeSettings.themeUrl||"";t.forEach(e=>{e.querySelectorAll('a[target="_blank"]:not(.has-external-icon)').forEach(e=>{if(s&&e.href.startsWith(s))return;const t=document.createElement("span");t.innerHTML='<i data-lucide="arrow-up-right" class="icon-step-1"></i>',e.appendChild(t),g({icons:f,root:t}),e.classList.add("has-external-icon")})})})(),(()=>{const e=document.querySelector(".tardis-progress-container"),t=document.getElementById("tardis-fill"),s=document.getElementById("tardisProgressStatus"),i=document.querySelector(".post-featured-image"),n=document.querySelector(".post-content");if(document.querySelector("#comments"),!(e&&t&&s&&n))return;const r=i?.offsetHeight||100;let o=!1;const a=()=>{const i=window.scrollY||window.pageYOffset,a=n.offsetTop+n.offsetHeight,l=window.innerHeight,c=a-l,d=Math.min(i/(c+100),1),u=Math.round(100*d);i>r&&i<c+l+-700?e.classList.add("visible"):e.classList.remove("visible");const h=864*(1-d);t.setAttribute("y",h),s.textContent=`Reading progress: ${u}%`,o=!1},l=()=>{o||(requestAnimationFrame(a),o=!0)};window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",l,{passive:!0}),a()})(),L(),(()=>{const e=document.querySelector(".rotating-sentence");if(!e)return;const t=e.querySelector(".rotating-sentence__dynamic");if(!t)return;let s;try{s=JSON.parse(e.dataset.phrases)}catch(e){return}if(!Array.isArray(s)||s.length<2)return;let i=0;t.textContent=s[i],t.classList.add("visible"),i=1,setInterval(()=>{t.classList.remove("visible"),setTimeout(()=>{t.textContent=s[i],t.classList.add("visible"),i=(i+1)%s.length},250)},6e3)})(),B(),A(),(()=>{const e=document.querySelectorAll(".brand-logos-marquee");window.matchMedia("(prefers-reduced-motion: reduce)").matches||e.forEach(e=>{e.setAttribute("data-animated",!0);const t=e.querySelector(".brand-logos-marquee__group");if(!t)return;const s=t.cloneNode(!0);s.setAttribute("aria-hidden",!0),e.appendChild(s)})})(),window.addEventListener("DOMContentLoaded",S)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",M):M();
