@use "utilities" as *;

/* 
HERO BACKGROUND BLOCK
Layout and styling for the large background image that appears at the top of most pages.
*/

.hero-bg-image {
    position: fixed;
    inset: 0;
    transition: opacity 0.1s ease-out;
    overflow: hidden;
    z-index: -2;

    > img,
    picture > img {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        will-change: opacity;
        opacity: inherit;
    }
}

body.single-post .hero-bg-image {
    --hero-overlay-color: 0, 0, 0;
    --hero-overlay-gradient: none;
    --hero-overlay-opacity: 0;
    isolation: isolate;

    &::before {
        content: "";
        position: fixed;
        inset: 0;
        background-color: rgb(var(--hero-overlay-color));
        background-image: var(--hero-overlay-gradient);
        mix-blend-mode: color;
        opacity: var(--hero-overlay-opacity);
        pointer-events: none;
        transition: opacity 0.2s ease-out;
        z-index: 1;
    }

    > img {
        z-index: 0;
    }
}

body:is(.author) {
    .hero-bg-image > img {
        @media (max-width: 68.75rem) {
            left: 0;
            right: 0;
            object-position: right center;
        }

        @media (max-width: 49.938rem) {
            @include visually-hidden;
        }
    }
}

// Darken layers
body:is(.home) .hero-bg-image {
    &::after {
        content: "";
        position: fixed;
        inset: 0;
        background: hsl(var(--clr-surface-700-hsl) / 0.75);
        z-index: 1;
        pointer-events: none;
    }
}

//All pages other than single post pages
body:not(.home):not(.single) .hero-bg-image {
    &::after {
        content: "";
        position: fixed;
        inset: 0;
        background: hsl(var(--clr-surface-600-hsl) / 0.6);
        z-index: 1;
        pointer-events: none;
    }
}

// Review Compendium page
body:not(.home):is(.page-template-reviews-compendium) .hero-bg-image {
    &::after {
        background: hsl(var(--clr-surface-600-hsl) / 0.5);
    }
}

// Category pages
body:not(.home):is(.category) .hero-bg-image {
    &::after {
        background: hsl(var(--clr-surface-600-hsl) / 0.3);
    }
}

// Legal pages
body:not(.home):is(.page-template-legal-template) .hero-bg-image {
    &::after {
        background: hsl(var(--clr-surface-600-hsl) / 0.6);
    }
}
