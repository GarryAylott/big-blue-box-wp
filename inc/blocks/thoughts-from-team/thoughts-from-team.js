(()=>{"use strict";const e=window.React,t=window.wp.i18n,a=window.wp.element,r=window.wp.data,n=window.wp.blockEditor,o=window.wp.components,l=JSON.parse('{"UU":"bbb/thoughts-from-team"}');(0,window.wp.blocks.registerBlockType)(l.UU,{edit:function({attributes:l,setAttributes:s}){const{entries:i=[]}=l;(0,a.useEffect)(()=>{i&&0!==i.length||s({entries:[{userId:0,content:""}]})},[]);const u=(0,r.useSelect)(e=>e("core").getUsers({roles:["author","editor"]}),[])||[],m=u.map(e=>({label:e.name,value:e.id,avatar:e.avatar_urls&&e.avatar_urls[48]})),c=(e,t,a)=>{const r=i.map((r,n)=>n===e?{...r,[t]:a}:r);s({entries:r})},h=(0,n.useBlockProps)({className:"team-thoughts-editor"}),d=(0,t.__)("Contributor","bigbluebox"),_=(0,t.__)("Select a user","bigbluebox"),b=(0,t.__)("Text from contributor","bigbluebox"),g=(0,t.__)("Add their thoughts hereâ€¦","bigbluebox");return(0,e.createElement)("div",{...h},(0,e.createElement)("h3",{className:"team-thoughts-editor__title"},(0,t.__)("Thoughts from the Team","bigbluebox")),(0,e.createElement)("div",{className:"team-thoughts-editor__entries"},i.map((a,r)=>{const n=u.find(e=>e.id===a.userId),l=n?.avatar_urls?.[96]||n?.avatar_urls?.[48]||"";return(0,e.createElement)("div",{key:r,className:"team-thought-entry"},n&&(0,e.createElement)("div",{className:"team-thought-entry__user"},(0,e.createElement)("img",{className:"team-thought-entry__avatar",src:l,alt:n.name,width:"56",height:"56"}),(0,e.createElement)("h4",null,(h=n.name)?h.split(" ")[0]:"")),(0,e.createElement)("div",{className:"team-thought-entry__contributor"},(0,e.createElement)("span",{className:"team-thought-entry__label","aria-hidden":"true"},d),(0,e.createElement)(o.SelectControl,{className:"team-thought-entry__input",label:d,hideLabelFromVision:!0,value:a.userId,options:[{label:_,value:0},...m.map(({label:e,value:t})=>({label:e,value:t}))],onChange:e=>c(r,"userId",parseInt(e,10))})),(0,e.createElement)("div",{className:"team-thought-entry__content"},(0,e.createElement)("span",{className:"team-thought-entry__label","aria-hidden":"true"},b),(0,e.createElement)(o.TextareaControl,{className:"team-thought-entry__input",label:b,hideLabelFromVision:!0,value:a.content,onChange:e=>c(r,"content",e),placeholder:g})),i.length>1&&(0,e.createElement)("div",{className:"team-thought-entry__actions"},(0,e.createElement)(o.Button,{className:"team-thought-entry__remove",variant:"secondary",isDestructive:!0,onClick:()=>(e=>{const t=[...i];t.splice(e,1),s({entries:t})})(r)},(0,t.__)("Remove author","bigbluebox"))));var h})),(0,e.createElement)(o.Button,{className:"team-thoughts-editor__add",variant:"primary",onClick:()=>{s({entries:[...i,{userId:0,content:""}]})}},i&&i.length>0?(0,t.__)("Add another author","bigbluebox"):(0,t.__)("Add author","bigbluebox")))},save:()=>null})})();